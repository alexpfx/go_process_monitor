syntax = "proto3";
option go_package = "./pb";
package ps_monitor;

message Event{
  int64 time = 1;
  string text = 2;
  bool match = 3;
}
message Process{
  string cmdPath = 1;
  string args = 2;
}
message Filter{
  string pattern = 1;
  bool receiveOutput = 2;
}
message ProcessMonitorRequest{
  oneof payload{
    Process process = 1;
    Filter filter = 2;
  }
}

service ProcessMonitor{
  rpc StartProcess (stream ProcessMonitorRequest) returns (stream Event);
}

